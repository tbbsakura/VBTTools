# VBTTools: 手の位置と向きの調整
HMDをかぶって利用する場合、手の位置がおかしい場合は調整が必要です。

また、この調整内容は、ゲーム中でのVRで選択するためのレイ(光線)ポインターの向きにも影響します。
Adjust UIのチェック3種類のいずれかを入れてスライダーを動かして調整でき、調整内容はjsonファイルに保存できます。VBTTools.exe と同じフォルダの default.jsonは起動時に読み込まれる設定値になります。

SteamVRHandTest で調整する場合、起動して手が見える位置にある状態にします。（画面内に手が出てこない場合はSteamVRとVMTのルームセットアップを確認してください）
 **VMTの仮想コントローラーの位置と向きを示すCubeと、手のモデルがセットで表示されます。** 

調整は、後述の通り、回転を調整したあと位置を調整します。回転を調整するまでは、2-1.後半に記載の手の位置移動機能を活用して画面内に手がある状態で一時停止しておくと便利です。（位置を調整するときは解除してください）

次にまず手首の位置をうごかさず回転させてみます。VMTのCubeがくるくる回りますが、それに連動する手の位置や向きがおかしい場合に、修正をします。

調整設定画面は3つに分かれていて、1つめ"Controller Hand Offset"は左右の **「Cubeの挙動を修正」** するもの、2つめと3つめ(Skeletal Root/Wrist Lと同R)はそれぞれ左手と右手のもので **「Cubeは変更せず、Cubeと手の位置関係・向きを調整」** するものです。

1つめのUIでのController Hand Offsetの調整(Cubeの調整)は、基本的にはPosition の調整値を0の状態で Rotationの調整を先に行い、最後にPosition を調整すると良いと思います。

Cubeの調整は、以下のことに留意して行います。
- レイ（光線）ポインターは青矢印の方向に出る
- VRChat のランチパッドやメニューは緑の矢印のほうに出る

Cube の向きと挙動を調整すると、手の向きが真逆になったりするので、2つめ3つめのUI画面で手を回転させ(rotationを調整する)実際の手の表示される向きを修正します。

手の動きは悪くない感じに調整できたら、HMDを被ってVMCP受信状態(一時的な手の移動がキャンセルされた状態)にして、実際の手と、HMDで投影されている手の位置を確認します。この段階でズレに違和感がある場合は、1つめのController Hand Offset調整画面の一番下のほうにある位置調整を行います。
これは単純に手の表示位置を平行移動するものなので、自分の手の位置にあわせて移動させて調整します。なお、VMCP受信を停止にした状態でのTestUIやJoy-Conでの一時的な手の移動はVMCP受信を再開するとリセットされますが、調整UIで調整した分は常時適用されます。

調整ができたら、Saveボタンで設定を json ファイルに保存します。自動的に読み込みたい場合は vbtools.exe と同じ場所にある default.jsonを上書きします（戻したい時はzipから展開して上書きしてください）。何種類か設定を持ちたい場合は別のファイル名で保存して、調整画面のLoadボタンで読み込むこともできます。
